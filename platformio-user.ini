[platformio]
default_envs = d1_mini, d1_mini_pro, esp32c3_mini, esp32s3_mini

; boards
; https://registry.platformio.org/platforms/platformio/espressif32/boards

[env:d1_mini]
platform = espressif8266@4.2.0
framework = arduino
board = d1_mini
board_build.ldscript = eagle.flash.4m2m.ld
build_flags = ${common.build_flags} -D AMS_REMOTE_DEBUG=1
lib_ldf_mode = off
lib_compat_mode = off
lib_deps = ESP8266WiFi, ESP8266mDNS, ESP8266WebServer, ESP8266HTTPClient, ESP8266httpUpdate, ESP8266SSDP, EspSoftwareSerial@8.2.0, ${common.lib_deps}, SvelteUi
lib_ignore = ${common.lib_ignore}
extra_scripts = ${common.extra_scripts}

[env:d1_mini_pro]
platform = espressif8266@4.2.0
framework = arduino
board = d1_mini
board_build.ldscript = eagle.flash.4m2m.ld
build_flags = ${common.build_flags} -D AMS_REMOTE_DEBUG=1
lib_ldf_mode = off
lib_compat_mode = off
lib_deps = ESP8266WiFi, ESP8266mDNS, ESP8266WebServer, ESP8266HTTPClient, ESP8266httpUpdate, ESP8266SSDP, EspSoftwareSerial@8.2.0, ${common.lib_deps}, SvelteUi
lib_ignore = ${common.lib_ignore}
extra_scripts = ${common.extra_scripts}

[env:esp32c3_mini]
platform = https://github.com/tasmota/platform-espressif32/releases/download/2023.07.00/platform-espressif32.zip
framework = arduino
board = esp32-c3-devkitm-1
board_build.mcu = esp32c3
board_build.partitions = custom_partition.csv
build_flags = 
    ${common.build_flags} 
    -D AMS_REMOTE_DEBUG=1
    -D AMS_CLOUD=1
    -D AMS_KMP=1
    -L precompiled/esp32c3
    -lKmpTalker
lib_ldf_mode = off
lib_compat_mode = off
lib_deps = ${esp32.lib_deps}
lib_ignore = ${common.lib_ignore}
extra_scripts = ${common.extra_scripts}
; Flash: 4MB QD, PSRAM: ??K QD
board_build.arduino.memory_type = qio_qspi
board_build.flash_mode = qio
board_build.psram_type = qio
board_upload.flash_size = 4MB
board_upload.maximum_size = 4194304
board_build.extra_flags = 
  -DBOARD_HAS_PSRAM

[env:esp32s3_mini]
platform = https://github.com/tasmota/platform-espressif32/releases/download/2023.07.00/platform-espressif32.zip
; platform = espressif32
framework = arduino
board = esp32-s3-devkitc-1
board_build.mcu = esp32s3
build_flags = 
    ${common.build_flags} 
    -D AMS_REMOTE_DEBUG=1
    -D AMS_CLOUD=1
    -D AMS_KMP=1
    -L precompiled/esp32s3
    -lKmpTalker
lib_ldf_mode = off
lib_compat_mode = off
lib_deps = ${esp32.lib_deps}
lib_ignore = ${common.lib_ignore}
extra_scripts = ${common.extra_scripts}
; Flash: 4MB QD, PSRAM: 2MB QD
board_build.arduino.memory_type = qio_qspi
board_build.flash_mode = qio
board_build.psram_type = qio
board_upload.flash_size = 4MB
board_upload.maximum_size = 4194304
board_build.extra_flags = 
  -DBOARD_HAS_PSRAM